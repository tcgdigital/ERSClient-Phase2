<div class="row">
    <div class="col-12">
        <div class="card card-without-top-border noBorder">
            <form [formGroup]="form">
                <div class="card-header">
                    <strong>Create an Event</strong>
                    <div class="row">
                        <input id="IncidentId" type="hidden" name="IncidentId" formControlName="IncidentId" [(ngModel)]="incidentModel.IncidentId" />
                        <div class="form-group col-lg-2 col-sm-12 col-md-6">

                            <label for="IsDrill"></label>
                            <md-checkbox class="drill-checkbox-style" md-no-ink id="IsDrill" name="IsDrill"
                                formControlName="IsDrill" [ngModel]="incidentModel.IsDrill" (change)="IsDrill($event)"
                                aria-label="Drill">Drill
                            </md-checkbox>
                        </div>
                        <div class="form-group col-lg-3 col-sm-12 col-md-6">
                            <label for="OrganizationId">Organization<span class="required">*</span></label>
                            <select id="OrganizationId" class="form-control" formControlName="OrganizationId" name="OrganizationId"
                                (change)="organizationChange($event.target.value,activeOrganizations)">
                                <option value=''>Select Organization</option>
                                <option *ngFor="let organization of activeOrganizations" [value]="organization.OrganizationId">
                                    {{organization.OrganizationCode}}
                                </option>
                            </select>
                            <small *ngIf="form.controls.OrganizationId.hasError('required')" [hidden]="form.controls.OrganizationId.valid || (form.controls.OrganizationId.pristine && !submitted)"
                                class="text-danger">Required</small>
                        </div>
                    </div>
                </div>
                <div class="card-block">
                    <div class="row">
                        <div class="form-group col-lg-3 col-sm-12 col-md-6">
                            <label for="EmergencyType">Crisis Type<span class="required">*</span></label>
                            <select id="EmergencyTypeId" class="form-control" formControlName="EmergencyTypeId" name="EmergencyTypeId"
                                (change)="emergencyTypeChange($event.target.value,activeEmergencyTypes)">
                                <option value=''>Select Crisis Type</option>
                                <option *ngFor="let emergencyType of activeEmergencyTypes" [value]="emergencyType.EmergencyTypeId">
                                    {{emergencyType.EmergencyTypeName}}
                                </option>
                            </select>
                            <small *ngIf="form.controls.EmergencyTypeId.hasError('required')" [hidden]="form.controls.EmergencyTypeId.valid || (form.controls.EmergencyTypeId.pristine && !submitted)"
                                class="text-danger">Required</small>
                        </div>
                        <div class="form-group col-lg-3 col-sm-12 col-md-6">
                            <label for="EmergencyName">Crisis Name<span class="required">*</span></label>
                            <input id="EmergencyName" class="form-control" type="text" name="EmergencyName"
                                formControlName="EmergencyName" placeholder="Enter Crisis Name" />
                            <small *ngIf="form.controls.EmergencyName.hasError('required')" [hidden]="form.controls.EmergencyName.valid || (form.controls.EmergencyName.pristine && !submitted)"
                                class="text-danger">Required</small>
                            <small *ngIf="form.controls.EmergencyName.hasError('maxlength')" [hidden]="form.controls.EmergencyName.valid || (form.controls.EmergencyName.pristine && !submitted)"
                                class="text-danger">
                            </small>
                        </div>
                        <div class="form-group col-lg-3 col-sm-12 col-md-6">
                            <label for="AffectedStation">Responsible Station<span class="required">*</span></label>
                            <select id="AffectedStationId" class="form-control" formControlName="AffectedStationId"
                                name="AffectedStationId" (change)="affectedStationChange($event.target.value,affectedStations)">
                                <option value=''>Select Responsible Station</option>
                                <option value="Offsite">Offsite</option>
                                <option *ngFor="let affectedStation of affectedStations" [value]="affectedStation.IATA">
                                    {{affectedStation.AirportName}}
                                </option>
                            </select>
                            <small *ngIf="form.controls.AffectedStationId.hasError('required')" [hidden]="form.controls.AffectedStationId.valid || (form.controls.AffectedStationId.pristine && !submitted)"
                                class="text-danger">Required</small>
                        </div>
                        <div *ngIf="isOffsite" class="form-group col-lg-2 col-sm-12 col-md-6">
                            <label for="OffsiteDetails">Offsite Details<span class="required">*</span></label>
                            <input id="OffsiteDetails" class="form-control" type="text" name="OffsiteDetails"
                                formControlName="OffsiteDetails" placeholder="Enter Offsite Details" />
                            <small *ngIf="form.controls.OffsiteDetails.hasError('required')" [hidden]="form.controls.OffsiteDetails.valid || (form.controls.OffsiteDetails.pristine && !submitted)"
                                class="text-danger">Required</small>
                        </div>
                        <div class="form-group col-lg-3 col-sm-12 col-md-6">
                            <label for="AffectedCountry">State Of Occurence<span class="required">*</span></label>
                            <input id="AffectedCountry" class="form-control" type="text" name="AffectedCountry"
                                formControlName="AffectedCountry" placeholder="Enter Country" />
                            <small *ngIf="form.controls.AffectedCountry.hasError('required')" [hidden]="form.controls.AffectedCountry.valid || (form.controls.AffectedCountry.pristine && !submitted)"
                                class="text-danger">Required</small>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-3 col-sm-12 col-md-6">
                            <div class="row">
                                <div class="form-group col-lg-12 col-md-12 col-sm-12">
                                    <label for="EmergencyDate">Date of Crisis<span class="required">*</span>&nbsp;&nbsp;(Manila
                                        Time)</label>

                                    <input id="EmergencyDate" [dropSpecialCharacters]="false" specialCharacters="[ '-' ,':' ]"
                                        mask="00-SSS-0000 00:00" class="form-control" type="text" name="EmergencyDate"
                                        formControlName="EmergencyDate" placeholder="Crisis Date" datetime-picker
                                        #emergencyDateTimePicker="datetimepicker" (blur)="onBlue_EmergencyDate($event)"
                                        [options]="datepickerOptionED" (selectHandler)="dateTimeSet($event,'EmergencyDate');" />
                                    <!-- <input id="EmergencyDate" readonly class="form-control" type="text" name="EmergencyDate" formControlName="EmergencyDate"
                                        placeholder="Crisis Date" datetime-picker [options]="datepickerOptionED" (selectHandler)="dateTimeSet($event,'EmergencyDate');"
                                    /> -->
                                    <small *ngIf="form.controls.EmergencyDate.hasError('required')" [hidden]="form.controls.EmergencyDate.valid || (form.controls.EmergencyDate.pristine && !submitted)"
                                        class="text-danger">Required</small>
                                    <small *ngIf="form.controls.EmergencyDate.hasError('InvalidEmergencyDate')"
                                        [hidden]="form.controls.EmergencyDate.valid || (form.controls.EmergencyDate.pristine && !submitted)"
                                        class="text-danger">Entered date is invalid</small>
                                    <small *ngIf="form.controls.EmergencyDate.hasError('FutureEmergencyDate')" [hidden]="form.controls.EmergencyDate.valid || (form.controls.EmergencyDate.pristine && !submitted)"
                                        class="text-danger">Entered date should not be future date</small>
                                </div>
                            </div>
                            <div class="row">
                                <div class="form-group col-lg-12 col-md-12 col-sm-12">
                                    <label for="EmergencyDateLocal">Date of Crisis (UTC)</label>
                                    <input id="EmergencyDateLocal" disabled formControlName="EmergencyDateLocal" class="form-control"
                                        type="text" name="EmergencyDateLocal" placeholder="Crisis Date" />
                                </div>
                            </div>
                        </div>
                        <div class="form-group col-lg-9 col-sm-12 col-md-6">
                            <label for="Description">Note<span class="required">*</span></label>
                            <textarea id="Description" class="form-control textarea" type="text" name="Description"
                                formControlName="Description" placeholder="Enter Description"></textarea>
                            <small *ngIf="form.controls.Description.hasError('required')" [hidden]="form.controls.Description.valid || (form.controls.Description.pristine && !submitted)"
                                class="text-danger">Required</small>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group col-lg-3 col-sm-12 col-md-6">
                            <label for="WhatHappened">Event<span class="required">*</span></label>
                            <input id="WhatHappened" class="form-control" type="text" name="WhatHappened"
                                formControlName="WhatHappened" placeholder="Event" />
                            <small *ngIf="form.controls.WhatHappened.hasError('required')" [hidden]="form.controls.WhatHappened.valid || (form.controls.WhatHappened.pristine && !submitted)"
                                class="text-danger">Required</small>
                        </div>
                        <div class="form-group col-lg-3 col-sm-12 col-md-6">
                            <label for="WhereHappened">Location</label>
                            <input id="WhereHappened" class="form-control" type="text" name="WhereHappened"
                                formControlName="WhereHappened" placeholder="Location" />
                        </div>
                        <div class="form-group col-lg-3 col-sm-12 col-md-6">
                            <label for="OtherConfirmationInformation">Other Information</label>
                            <input id="OtherConfirmationInformation" class="form-control" type="text" name="OtherConfirmationInformation"
                                formControlName="OtherConfirmationInformation" placeholder="Other Information" />
                        </div>
                        <div class="form-group col-lg-3 col-sm-12 col-md-6">
                            <label for="SourceInformation">Source Of Information</label>
                            <input id="SourceInformation" class="form-control" type="text" name="SourceInformation"
                                formControlName="SourceInformation" placeholder="Source Of Information" />
                            <small *ngIf="form.controls.SourceInformation.hasError('maxlength')" [hidden]="form.controls.SourceInformation.valid || (form.controls.SourceInformation.pristine && !submitted)"
                                class="text-danger">
                            </small>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group col-lg-3 col-sm-12 col-md-6">
                            <label for="ReportedByName">Reporter</label>
                            <input id="ReportedByName" class="form-control" type="text" name="ReportedByName"
                                formControlName="ReportedByName" placeholder="Reporter" />
                            <small *ngIf="form.controls.ReportedByName.hasError('maxlength')" [hidden]="form.controls.ReportedByName.valid || (form.controls.ReportedByName.pristine && !submitted)"
                                class="text-danger">
                            </small>
                        </div>
                        <div class="form-group col-lg-3 col-sm-12 col-md-6">
                            <label for="ReportedByAddress">Reporter Address</label>
                            <input id="ReportedByAddress" class="form-control" type="text" name="ReportedByAddress"
                                formControlName="ReportedByAddress" placeholder="Reporter Address" />
                        </div>
                        <div class="form-group col-lg-3 col-sm-12 col-md-6">
                            <label for="ContactOfWitness">Contact Details</label>
                            <input id="ContactOfWitness" class="form-control" type="text" name="ContactOfWitness"
                                formControlName="ContactOfWitness" placeholder="Contact Details" />
                            <small *ngIf="form.controls.ContactOfWitness.hasError('maxlength')" [hidden]="form.controls.ContactOfWitness.valid || (form.controls.ContactOfWitness.pristine && !submitted)"
                                class="text-danger">
                            </small>
                        </div>
                        <!-- <div class="form-group col-lg-3 col-sm-12 col-md-6">
                            <label for="SenderOfCrisisInformation">Sender Of Crisis Information</label>
                            <input id="SenderOfCrisisInformation" class="form-control" type="text" name="SenderOfCrisisInformation" formControlName="SenderOfCrisisInformation"
                                placeholder="Sender Of Crisis Information" />
                            <small *ngIf="form.controls.SenderOfCrisisInformation.hasError('maxlength')" [hidden]="form.controls.SenderOfCrisisInformation.valid || (form.controls.SenderOfCrisisInformation.pristine && !submitted)"
                                class="text-danger">
                            </small>
                        </div> -->
                        <div class="form-group col-lg-3 col-sm-12 col-md-6">
                            <label for="Severity">Severity</label>
                            <select id="selectApprover" class="form-control" formControlName="Severity" name="Severity">
                                <option value=''>Select Severity</option>
                                <option *ngFor="let severity of severities" [value]="severity.Key">
                                    {{severity.Key}}
                                </option>
                            </select>
                        </div>
                    </div>
                    <!-- <div class="row">
                        <div class="form-group col-lg-6 col-sm-12 col-md-6">
                            <label for="Latitude">Latitude</label>
                            <input id="Latitude" class="form-control" type="text" name="Latitude" formControlName="Latitude" placeholder="Latitude" />
                        </div>
                        <div class="form-group col-lg-6 col-sm-12 col-md-6">
                            <label for="Longitude">Longitude</label>
                            <input id="Longitude" class="form-control" type="text" name="Longitude" formControlName="Longitude" placeholder="Longitude"
                            />
                        </div>
                    </div> -->
                    <div class="row">
                        <div class="form-group col-lg-3 col-sm-12 col-md-6">
                            <label for="ReportedDate">Reported Date Time<span class="required">*</span>&nbsp;&nbsp;(Manila
                                Time)</label>
                            <input id="ReportedDate" [dropSpecialCharacters]="false" specialCharacters="[ '-' ,':' ]"
                                mask="00-SSS-0000 00:00" class="form-control" type="text" name="ReportedDate"
                                formControlName="ReportedDate" placeholder="Reported Date" datetime-picker
                                #reportedDateTimePicker="datetimepicker" (blur)="onBlue_ReportedDate($event)" [options]="datepickerOptionED"
                                (selectHandler)="dateTimeSet($event,'ReportedDate');" />

                            <small *ngIf="form.controls.ReportedDate.hasError('required')" [hidden]="form.controls.ReportedDate.valid || (form.controls.ReportedDate.pristine && !submitted)"
                                class="text-danger">Required</small>
                            <small *ngIf="form.controls.ReportedDate.hasError('InvalidDate')" [hidden]="form.controls.ReportedDate.valid || (form.controls.ReportedDate.pristine && !submitted)"
                                class="text-danger">Reported date is invalid</small>
                        </div>
                        <div class="form-group col-lg-3 col-sm-12 col-md-6">
                            <label for="ReportedDateLocal">Reported Date Time &nbsp;&nbsp;(UTC)</label>
                            <input id="ReportedDateLocal" disabled formControlName="ReportedDateLocal" class="form-control"
                                type="text" name="ReportedDateLocal" placeholder="Reported Date" />
                        </div>

                        <div class="form-group col-lg-3 col-sm-12 col-md-6" *ngIf="isBorrowed">
                            <label for="IncidentsToPickForReplication">Event To Replicate</label>
                            <select id="BorrowedIncident" [(ngModel)]="incidentModel.BorrowedIncident" class="form-control"
                                formControlName="BorrowedIncident" name="BorrowedIncident" (change)="incidentsToPickForReplicationChange($event.target.value,incidentsToPickForReplication)">
                                <option value=0>Select Event To Pick</option>
                                <option *ngFor="let incidentToPickForReplication of incidentsToPickForReplication"
                                    [value]="incidentToPickForReplication.IncidentId">
                                    {{incidentToPickForReplication.EmergencyName}}
                                </option>
                            </select>
                        </div>
                    </div>
                </div>
            </form>
            <div class="card m-2" *ngIf="isFlightRelated">
                <form [formGroup]="formFlight">
                    <div class="card-header ">
                        <strong>Flight Information</strong>
                    </div>
                    <div class="card-block">
                        <div class="row">
                            <div class="form-group col-lg-3 col-sm-12 col-md-6">
                                <label for="FlightNumber">Flight Number<span class="required">*</span></label>
                                <input id="FlightNumber" class="form-control" [ngClass]="flightClass" type="text" name="FlightNumber"
                                    formControlName="FlightNumber" placeholder="FlightNumber" />
                                <small *ngIf="formFlight.controls.FlightNumber.hasError('required')" [hidden]="formFlight.controls.FlightNumber.valid || (formFlight.controls.FlightNumber.pristine && !submittedFlight)"
                                    class="text-danger">Required</small>
                                <small *ngIf="formFlight.controls.FlightNumber.hasError('maxlength')" [hidden]="formFlight.controls.FlightNumber.valid || (formFlight.controls.FlightNumber.pristine && !submitted)"
                                    class="text-danger">
                                </small>
                            </div>
                            <div class="form-group col-lg-3 col-sm-12 col-md-6">
                                <label for="Origin">Origin<span class="required">*</span></label>
                                <!-- <input id="Origin" class="form-control" [ngClass]="flightClass" type="text" name="Origin" formControlName="Origin" placeholder="Origin"
                                /> -->
                                <select id="Origin" class="form-control" [ngClass]="flightClass" formControlName="Origin"
                                    name="Origin">
                                    <option value=''>Select Origin Station</option>
                                    <option *ngFor="let affectedStation of affectedStations" [value]="affectedStation.IATA">
                                        {{affectedStation.AirportName}}
                                    </option>
                                </select>
                                <small *ngIf="formFlight.controls.Origin.hasError('required')" [hidden]="formFlight.controls.Origin.valid || (formFlight.controls.Origin.pristine && !submittedFlight)"
                                    class="text-danger">Required</small>
                                <small *ngIf="formFlight.controls.Origin.hasError('maxlength')" [hidden]="formFlight.controls.Origin.valid || (formFlight.controls.Origin.pristine && !submitted)"
                                    class="text-danger">
                                </small>
                            </div>
                            <div class="form-group col-lg-3 col-sm-12 col-md-6">
                                <label for="Destination">Destination<span class="required">*</span></label>
                                <!-- <input id="Destination" class="form-control" [ngClass]="flightClass" type="text" name="Destination" formControlName="Destination"
                                    placeholder="Destination" /> -->
                                <select id="Destination" class="form-control" [ngClass]="flightClass" formControlName="Destination"
                                    name="Destination">
                                    <option value=''>Select Destination Station</option>
                                    <option *ngFor="let affectedStation of affectedStations" [value]="affectedStation.IATA">
                                        {{affectedStation.AirportName}}
                                    </option>
                                </select>
                                <small *ngIf="formFlight.controls.Destination.hasError('required')" [hidden]="formFlight.controls.Destination.valid || (formFlight.controls.Destination.pristine && !submittedFlight)"
                                    class="text-danger">Required</small>
                                <small *ngIf="formFlight.controls.Destination.hasError('maxlength')" [hidden]="formFlight.controls.Destination.valid || (formFlight.controls.Destination.pristine && !submitted)"
                                    class="text-danger">
                                </small>
                            </div>
                            <div class="form-group col-lg-3 col-sm-12 col-md-6">
                                <label for="Scheduleddeparture(UTC)">Sched. Departure (UTC)<span class="required">*</span></label>
                                <!-- <input id="Scheduleddeparture" #departuredatepicker="datetimepicker" readonly class="form-control"
                                    [ngClass]="flightClass" type="text" name="Scheduleddeparture" formControlName="Scheduleddeparture"
                                    placeholder="Scheduled Departure" datetime-picker [options]="datepickerOptionDeparture"
                                    (selectHandler)="dateTimeSet($event,'Scheduleddeparture');" /> -->

                                <input id="Scheduleddeparture" class="form-control" type="text" name="Scheduleddeparture"
                                    [dropSpecialCharacters]="false" specialCharacters="[ '-' ,':' ]" mask="00-SSS-0000 00:00"
                                    formControlName="Scheduleddeparture" placeholder="Scheduled Departure Date"
                                    datetime-picker #scheduledDepartureDateTimePicker="datetimepicker" [options]="datepickerOptionED"
                                    (selectHandler)="dateTimeSet($event,'Scheduleddeparture');" (blur)="onBlue_ScheduledDepartureDate($event)" />

                                <small *ngIf="formFlight.controls.Scheduleddeparture.hasError('required')" [hidden]="formFlight.controls.Scheduleddeparture.valid || (formFlight.controls.Scheduleddeparture.pristine && !submittedFlight)"
                                    class="text-danger">Required</small>

                                <small *ngIf="formFlight.controls.Scheduleddeparture.hasError('InvalidDate')" [hidden]="formFlight.controls.Scheduleddeparture.valid || (formFlight.controls.Scheduleddeparture.pristine && !submitted)"
                                    class="text-danger">Scheduled departure date is invalid</small>
                            </div>
                        </div>
                        <div class="row">

                            <div class="form-group col-lg-3 col-sm-12 col-md-6">
                                <label for="ScheduledDeparture(LOCAL)">Sched. Departure Org. (LOCAL)<span class="required">*</span></label>
                                <input id="ScheduleddepartureLOC" disabled class="form-control" [ngClass]="flightClass"
                                    type="text" name="ScheduleddepartureLOC" formControlName="ScheduleddepartureLOC"
                                    placeholder="Sched. Departure Org. (LOCAL)" />
                            </div>
                            <div class="form-group col-lg-3 col-sm-12 col-md-6">
                                <label for="Scheduledarrival(UTC)">Sched. Arrival (UTC)<span class="required">*</span></label>
                                <!-- <input #arrivaldatepicker="datetimepicker" id="Scheduledarrival" readonly class="form-control"
                                    [ngClass]="flightClass" type="text" name="Scheduledarrival" formControlName="Scheduledarrival"
                                    placeholder="Sched. Arrival (UTC)" datetime-picker [options]="datepickerOptionArrival"
                                    (selectHandler)="dateTimeSet($event,'Scheduledarrival');" /> -->

                                <input id="Scheduledarrival" [dropSpecialCharacters]="false" specialCharacters="[ '-' ,':' ]"
                                    mask="00-SSS-0000 00:00" class="form-control" type="text" name="Scheduledarrival"
                                    formControlName="Scheduledarrival" placeholder="Scheduled Arrival Date"
                                    datetime-picker #scheduledArrivalDateTimePicker="datetimepicker" [options]="datepickerOptionED"
                                    (selectHandler)="dateTimeSet($event,'Scheduledarrival');" (blur)="onBlue_ScheduledArrivalDate($event)" />

                                <small *ngIf="formFlight.controls.Scheduledarrival.hasError('required')" [hidden]="formFlight.controls.Scheduledarrival.valid || (formFlight.controls.Scheduledarrival.pristine && !submittedFlight)"
                                    class="text-danger">Required</small>

                                <small *ngIf="formFlight.controls.Scheduledarrival.hasError('InvalidDate')" [hidden]="formFlight.controls.Scheduledarrival.valid || (formFlight.controls.Scheduledarrival.pristine && !submitted)"
                                    class="text-danger">Scheduled arrival date is invalid</small>

                            </div>
                            <div class="form-group col-lg-3 col-sm-12 col-md-6">
                                <label for="ScheduledArrival(LOCAL)">Sched. Arrival Dest. (LOCAL)<span class="required">*</span></label>
                                <input id="ScheduledarrivalLOC" disabled class="form-control" [ngClass]="flightClass"
                                    type="text" name="ScheduledarrivalLOC" formControlName="ScheduledarrivalLOC"
                                    placeholder="Sched. Arrival Dest. (LOCAL)" />
                            </div>
                            <div class="form-group col-lg-3 col-sm-12 col-md-6">
                                <label for="FlightTailNumber">AC Registry<span class="required">*</span></label>
                                <input id="FlightTailNumber" class="form-control" [ngClass]="flightClass" type="text"
                                    name="FlightTailNumber" formControlName="FlightTailNumber" placeholder="AC Registry" />
                                <small *ngIf="formFlight.controls.FlightTailNumber.hasError('required')" [hidden]="formFlight.controls.FlightTailNumber.valid || (formFlight.controls.FlightTailNumber.pristine && !submittedFlight)"
                                    class="text-danger">Required</small>
                                <small *ngIf="formFlight.controls.FlightTailNumber.hasError('maxlength')" [hidden]="formFlight.controls.FlightTailNumber.valid || (formFlight.controls.FlightTailNumber.pristine && !submitted)"
                                    class="text-danger">
                                </small>
                            </div>
                        </div>
                        <div class="row">
                            <div class="form-group col-lg-3 col-sm-12 col-md-6">
                                <label for="AircraftTypeId">Aircraft Type<span class="required">*</span></label>
                                <select id="AircraftTypeId" class="form-control" [ngClass]="flightClass"
                                    formControlName="AircraftTypeId" name="AircraftTypeId" (change)="aircraftTypeChange($event.target.value,activeAircraftTypes)">
                                    <option value=''>Select Aircraft Type</option>
                                    <option *ngFor="let activeAircraftType of activeAircraftTypes" [value]="activeAircraftType.AircraftTypeId">
                                        {{activeAircraftType.AircraftTypeCode}}
                                    </option>
                                </select>
                                <small *ngIf="formFlight.controls.AircraftTypeId.hasError('required')" [hidden]="formFlight.controls.AircraftTypeId.valid || (formFlight.controls.AircraftTypeId.pristine && !submittedFlight)"
                                    class="text-danger">Required</small>

                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="col-sm-3 ">
                <div class="fromtop1 ">
                    <button class="btn btn-primary" type="button" (click)="onSubmit()">Next</button>
                    <button class="btn btn-warning" type="button" (click)="cancel()">Cancel</button>
                </div>
            </div>
            <br /><br /><br /><br />
        </div>
    </div>

    <br /><br />
</div>

<div bsModal #childModalViewWeatherLocation="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title"><strong>View Weather Location</strong></h4>
                <i class="fa fa-times pull-right" aria-hidden="true" (click)="hideViewWeatherLocation()"></i>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-12 col-md-6">
                        <weather-widget [location]="'Kolkata'"></weather-widget>
                    </div>
                    <div class="col-12 col-md-6">
                        <agm-map [latitude]="lat" [longitude]="lng" [zoom]="zoom">
                            <agm-marker [latitude]="lat" [longitude]="lng" [label]="'M'">
                            </agm-marker>
                        </agm-map>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div bsModal #childModalViewIncident="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-lg width-1035px">
        <form [formGroup]="formPopup" (ngSubmit)="onPOPUPSubmit(formPopup.value)">
            <div class="modal-content">
                <div class="modal-header">
                    <span class="mod-head"><strong>Event View</strong></span>
                    <div *ngIf="IsDrillPopup" class="dilld">DRILL</div>
                    <i class="fa fa-times pull-right" aria-hidden="true" (click)="hideIncidentView()"></i>
                </div>
                <div class="modal-body card">
                    <div class="row">
                        <div class="form-group col-lg-3 col-sm-12 col-md-6">
                            <label for="OrganizationId">Organization</label>
                            <select id="OrganizationIdPopup" disabled class="form-control" formControlName="OrganizationIdPopup"
                                name="OrganizationIdPopup">
                                <option value=''>Select Organization</option>
                                <option *ngFor="let organization of activeOrganizations" [value]="organization.OrganizationId">
                                    {{organization.OrganizationCode}}
                                </option>
                            </select>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group col-lg-3 col-sm-12 col-md-6">
                            <label for="EmergencyType">Crisis Type</label>
                            <select id="EmergencyTypeIdPopup" disabled class="form-control" formControlName="EmergencyTypeIdPopup"
                                name="EmergencyTypeIdPopup">
                                <option value="0">Select Crisis Type</option>
                                <option *ngFor="let emergencyType of activeEmergencyTypes" [value]="emergencyType.EmergencyTypeId">
                                    {{emergencyType.EmergencyTypeName}}
                                </option>
                            </select>
                        </div>
                        <div class="form-group col-lg-3 col-sm-12 col-md-6">
                            <label for="EmergencyName">Crisis Name</label>
                            <input id="EmergencyNamePopup" disabled formControlName="EmergencyNamePopup" class="form-control"
                                type="text" name="EmergencyNamePopup" placeholder="" />
                        </div>
                        <div class="form-group col-lg-3 col-sm-12 col-md-6">
                            <label for="AffectedStation">Responsible Station</label>
                            <input id="AffectedStationIdPopup" disabled formControlName="AffectedStationIdPopup" class="form-control"
                                type="text" name="AffectedStationIdPopup" placeholder="" />
                        </div>
                        <div *ngIf="isOffSitePopup" class="form-group col-lg-2 col-sm-12 col-md-6">
                            <label for="OffsiteDetails">Offsite Details</label>
                            <input id="OffsiteDetailsPopup" disabled formControlName="OffsiteDetailsPopup" class="form-control"
                                type="text" name="OffsiteDetailsPopup" placeholder="" />
                        </div>
                        <div class="form-group col-lg-3 col-sm-12 col-md-6">
                            <label for="AffectedCountryPopup">State Of Occurence<span class="required">*</span></label>
                            <input id="AffectedCountryPopup" disabled class="form-control" type="text" name="AffectedCountryPopup"
                                formControlName="AffectedCountryPopup" placeholder="" />
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group col-lg-3 col-sm-12 col-md-6">
                            <div class="row">
                                <div class="form-group col-lg-12 col-sm-12 col-md-6">
                                    <label for="EmergencyDate">Date of Crisis (Manila Time)</label>
                                    <input id="EmergencyDatePopup" disabled formControlName="EmergencyDatePopup" class="form-control"
                                        type="text" name="EmergencyDatePopup" placeholder="" />
                                </div>
                            </div>
                            <div class="row">
                                <div class="form-group col-lg-12 col-sm-12 col-md-6">
                                    <label for="EmergencyDateLocal">Date of Crisis (UTC)</label>
                                    <input id="EmergencyDateLocalPopup" disabled formControlName="EmergencyDateLocalPopup"
                                        class="form-control" type="text" name="EmergencyDateLocalPopup" placeholder="" />
                                </div>
                            </div>
                        </div>
                        <div class="form-group col-lg-9 col-sm-12 col-md-6">
                            <label for="Description">Note</label>
                            <textarea id="DescriptionPopup" disabled formControlName="DescriptionPopup" class="form-control textarea"
                                type="text" name="DescriptionPopup" placeholder=""></textarea>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group col-lg-3 col-sm-12 col-md-6">
                            <div class="form-group">
                                <label for="WhatHappened">Event</label>
                                <input id="WhatHappenedPopup" disabled class="form-control" type="text" name="WhatHappenedPopup"
                                    formControlName="WhatHappenedPopup" disabled placeholder="" />

                            </div>
                        </div>
                        <div class="form-group col-lg-3 col-sm-12 col-md-6">
                            <div class="form-group">
                                <label for="WhereHappened">Location</label>
                                <input id="WhereHappenedPopup" disabled class="form-control" type="text" name="WhereHappenedPopup"
                                    formControlName="WhereHappenedPopup" disabled placeholder="" />

                            </div>
                        </div>
                        <div class="form-group col-lg-3 col-sm-12 col-md-6">
                            <div class="form-group">
                                <label for="OtherConfirmationInformation">Other Information</label>
                                <input id="OtherConfirmationInformationPopup" disabled class="form-control" type="text"
                                    name="OtherConfirmationInformationPopup" formControlName="OtherConfirmationInformationPopup"
                                    disabled placeholder="" />

                            </div>
                        </div>
                        <div class="form-group col-lg-3 col-sm-12 col-md-6">
                            <div class="form-group">
                                <label for="SourceInformation">Source Of Information</label>
                                <input id="SourceInformationPopup" disabled class="form-control" type="text" name="SourceInformationPopup"
                                    formControlName="SourceInformationPopup" disabled placeholder="" />

                            </div>
                        </div>
                    </div>
                    <div class="row">

                        <div class="form-group col-lg-3 col-sm-12 col-md-6">
                            <div class="form-group">
                                <label for="ReportedByName">Reporter</label>
                                <input id="ReportedByNamePopup" disabled class="form-control" type="text" name="ReportedByNamePopup"
                                    formControlName="ReportedByNamePopup" disabled placeholder="" />

                            </div>
                        </div>
                        <div class="form-group col-lg-3 col-sm-12 col-md-6">
                            <div class="form-group">
                                <label for="ReportedByAddress">Reporter Address</label>
                                <input id="ReportedByAddressPopup" disabled class="form-control" type="text" name="ReportedByAddressPopup"
                                    formControlName="ReportedByAddressPopup" disabled placeholder="" />

                            </div>
                        </div>
                        <div class="form-group col-lg-3 col-sm-12 col-md-6">
                            <div class="form-group">
                                <label for="ContactOfWitness">Contact Details</label>
                                <input id="ContactOfWitnessPopup" disabled class="form-control" type="text" name="ContactOfWitnessPopup"
                                    formControlName="ContactOfWitnessPopup" disabled placeholder="" />

                            </div>
                        </div>
                        <!-- <div class="form-group col-lg-3 col-sm-12 col-md-6">
                            <div class="form-group">
                                <label for="SenderOfCrisisInformation">Sender Of Crisis Information</label>
                                <input id="SenderOfCrisisInformationPopup" disabled class="form-control" type="text" name="SenderOfCrisisInformationPopup"
                                    formControlName="SenderOfCrisisInformationPopup" disabled placeholder="Sender Of Crisis Information"
                                />
                            </div>
                        </div> -->
                        <div class="form-group col-lg-3 col-sm-12 col-md-6">
                            <label for="Severity">Severity</label>
                            <input id="SeverityPopup" class="form-control" type="text" name="SeverityPopup"
                                formControlName="SeverityPopup" disabled placeholder="" />
                        </div>
                    </div>
                    <!-- <div class="row">
                        <div class="form-group col-lg-6 col-sm-12 col-md-6">
                            <label for="LatitudePopup">Latitude</label>
                            <input id="LatitudePopup" class="form-control" type="text" name="LatitudePopup" formControlName="LatitudePopup" placeholder=""
                            />
                        </div>
                        <div class="form-group col-lg-6 col-sm-12 col-md-6">
                            <label for="LongitudePopup">Longitude</label>
                            <input id="LongitudePopup" class="form-control" type="text" name="LongitudePopup" formControlName="LongitudePopup" placeholder=""
                            />
                        </div>
                    </div> -->
                    <div class="row">
                        <div class="form-group col-lg-3 col-sm-12 col-md-6">
                            <label for="ReportedDatePopup">Reported Date Time (Manila)</label>
                            <input id="ReportedDatePopup" disabled formControlName="ReportedDatePopup" class="form-control"
                                type="text" name="ReportedDatePopup" placeholder="" />
                        </div>
                        <div class="form-group col-lg-3 col-sm-12 col-md-6">
                            <label for="ReportedDateLocalPopup">Reported Date Time (UTC)</label>
                            <input id="ReportedDateLocalPopup" disabled formControlName="ReportedDateLocalPopup" class="form-control"
                                type="text" name="ReportedDateLocalPopup" placeholder="" />
                        </div>
                        <!-- <div class="form-group col-lg-3 col-sm-12 col-md-6">
                            <label for="Severity">Severity</label>
                            <input id="SeverityPopup" class="form-control" type="text" name="SeverityPopup" formControlName="SeverityPopup" disabled
                                placeholder="Severity" />
                        </div> -->
                        <div class="form-group col-lg-3 col-sm-12 col-md-6" *ngIf="isBorrowedIncidentPopup">

                            <label for="IncidentsToPickForReplication">Event To Replicate</label>

                            <input id="BorrowedIncidentPopup" disabled formControlName="BorrowedIncidentPopup" class="form-control"
                                type="text" name="BorrowedIncidentPopup" readonly placeholder="" />

                        </div>
                    </div>


                    <div class="card" *ngIf="isFlightRelatedPopup">
                        <div class="card-header ">
                            <strong>Flight Information:</strong>
                        </div>
                        <div class="card-block">
                            <div class="row">
                                <div class="form-group col-lg-3 col-sm-12 col-md-6">
                                    <label for="FlightNumber">Flight Number</label>
                                    <input id="FlightNumberPopup" disabled formControlName="FlightNumberPopup" class="form-control"
                                        type="text" name="FlightNumberPopup" placeholder="" />
                                </div>
                                <div class="form-group col-lg-3 col-sm-12 col-md-6">
                                    <label for="Origin">Origin</label>
                                    <input id="Origin" disabled formControlName="OriginPopup" class="form-control" type="text"
                                        name="OriginPopup" placeholder="" />
                                </div>
                                <div class="form-group col-lg-3 col-sm-12 col-md-6">
                                    <label for="Destination">Destination</label>
                                    <input id="DestinationPopup" disabled formControlName="DestinationPopup" class="form-control"
                                        type="text" name="DestinationPopup" placeholder="" />
                                </div>
                                <div class="form-group col-lg-3 col-sm-12 col-md-6">
                                    <label for="Scheduleddeparture(UTC)">Sched. Departure (UTC)</label>
                                    <input id="ScheduleddeparturePopup" disabled formControlName="ScheduleddeparturePopup"
                                        class="form-control" type="text" name="ScheduleddeparturePopup" placeholder="" />
                                </div>
                            </div>
                            <div class="row">

                                <div class="form-group col-lg-3 col-sm-12 col-md-6">
                                    <label for="Scheduleddeparture(LOCAL)">Sched. Departure Org. (LOCAL)</label>
                                    <input id="ScheduleddepartureLOCPopup" disabled class="form-control" [ngClass]="flightClass"
                                        type="text" name="ScheduleddepartureLOCPopup" formControlName="ScheduleddepartureLOCPopup"
                                        placeholder="" />

                                </div>
                                <div class="form-group col-lg-3 col-sm-12 col-md-6">
                                    <label for="Scheduledarrival(UTC)">Sched. Arrival (UTC)</label>
                                    <input id="ScheduledarrivalPopup" disabled formControlName="ScheduledarrivalPopup"
                                        class="form-control" type="text" name="ScheduledarrivalPopup" placeholder="" />

                                </div>
                                <div class="form-group col-lg-3 col-sm-12 col-md-6">
                                    <label for="Scheduledarrival(LOCAL)">Sched. Arrival Dest. (LOCAL)</label>
                                    <input id="ScheduledarrivalLOCPopup" disabled class="form-control" [ngClass]="flightClass"
                                        type="text" name="ScheduledarrivalLOCPopup" formControlName="ScheduledarrivalLOCPopup"
                                        placeholder="" />


                                </div>
                                <div class="form-group col-lg-3 col-sm-12 col-md-6">
                                    <label for="FlightTailNumber">AC Registry</label>
                                    <input id="FlightTailNumberPopup" disabled formControlName="FlightTailNumberPopup"
                                        class="form-control" type="text" name="FlightTailNumberPopup" placeholder="" />
                                </div>
                            </div>
                            <div class="row">

                                <div class="form-group col-lg-3 col-sm-12 col-md-6">
                                    <label for="AircraftTypeId">Aircraft Type</label>
                                    <select id="AircraftTypeIdPopup" disabled class="form-control" formControlName="AircraftTypeIdPopup"
                                        name="AircraftTypeId" (change)="aircraftTypeChange($event.target.value,activeEmergencyTypes)">
                                        <option value=''>Select Aircraft Type</option>
                                        <option *ngFor="let activeAircraftType of activeAircraftTypes" [value]="activeAircraftType.AircraftTypeId">
                                            {{activeAircraftType.AircraftTypeCode}}
                                        </option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-3">
                            <div class="fromtop1">
                                <button class="btn btn-primary" [disabled]="!formPopup.valid " type="submit">Submit</button>
                                <button class="btn btn-warning" type="button" (click)="hideIncidentView()">Cancel</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>